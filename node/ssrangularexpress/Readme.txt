1.Created root ssrangular express folder and use command to create client with angular cli
npx @angular/cli@17 new client --no-standalone
    Angular requires @angular/platform-server inside the Angular project to generate a server bundle.

    SSR works in Angular this way:

    1️⃣ Angular browser bundle → main.js
    2️⃣ Angular server bundle → main.server.js (requires platform-server)
    3️⃣ Express loads main.server.js → returns HTML

    Because Angular needs to compile your components for the server, the server bundle must be generated by Angular’s own compiler (ng build --server), which requires:

    @angular/platform-server

    AppServerModule

    main.server.ts

    These must live inside the Angular project.
    There is no way to generate Angular SSR HTML without these packages in the client folder.

    Express alone cannot SSR Angular. Angular must produce a server-side compiled module.

2.In client folder run this npm command also create server folder 
server->  npm install express ts-node @types/express
client->  npm install @angular/platform-server@17 @angular/platform-browser-dynamic@17 @angular-devkit/build-angular@17 zone.js

3.Create this folder structure 
    ssrangularexpress/
        client/
            package.json
            angular.json
            src/
                main.ts
                main.server.ts
                app/
                    app.module.ts
                    app.component.ts
                    app.server.module.ts
            tsconfig.json
            tsconfig.app.json
            tsconfig.server.json
        server/
            package.json
            server.ts
            tsconfig.json

4.Create App Server module + server entry in client folder

    src/app/app.server.module.ts

        import { NgModule } from '@angular/core';
        import { ServerModule } from '@angular/platform-server';
        import { AppModule } from './app.module';
        import { AppComponent } from './app.component';

        @NgModule({
        imports: [AppModule, ServerModule],
        bootstrap: [AppComponent],
        })
        export class AppServerModule {}

    src/main.server.ts

        import 'zone.js/node';
        import { renderModule } from '@angular/platform-server';
        import { AppServerModule } from './app/app.server.module';

        export function render(url: string) {
            return renderModule(AppServerModule, {
                document: '<app-root></app-root>',
                url,
            });
        }
    
5.Add server build config in client

    tsconfig.server.json
        {
            "extends": "./tsconfig.app.json",
            "compilerOptions": {
                "outDir": "./out-tsc/server",
                "module": "commonjs"
            },
            "files": [
                "src/main.server.ts",
                "src/app/app.server.module.ts"
            ]
        }

    Because TypeScript alone cannot create the final SSR bundle.
        The Angular Builder must:
            bundle files
            optimize code
            add zone.js patches
            add SSR engine logic
            handle lazy-loaded routes
            include server dependencies

    So the process looks like:
    tsconfig.server.json  →  out-tsc/server  →  Angular builder  →  dist/server


    Stage 1: TS compiler output (temporary)
    Stage 2: Final, optimized Node SSR output

6.Update angular.json to build server bundle

    Add this block under "architect":

       "server": {
            "builder": "@angular-devkit/build-angular:server",
            "options": {
                "outputPath": "dist/server",
                "main": "src/main.server.ts",
                "tsConfig": "tsconfig.server.json"
            }
        }

7.Add scripts in client/package.json

    "scripts": {
       "build:browser": "ng build",
       "build:server": "ng run client:server",
       "build:ssr": "npm run build:browser && npm run build:server"
    }

8.In server folder create these two files
   server/tsconfig.json
        {
            "compilerOptions": {
                "target": "es2019",
                "module": "commonjs",
                "strict": false,
                "esModuleInterop": true
            }
        }

    server/server.ts
      
        import express from 'express';
        import path from 'path';

        // Import server bundle from Angular dist (client built output)
        const { render } = require('../client/dist/server/main.js');

        const app = express();

        const browserPath = path.join(__dirname, '../client/dist/browser');
        app.use(express.static(browserPath));

        app.get('*', async (req, res) => {
        const html = await render(req.url);
        res.send(html);
        });

        app.listen(4000, () => {
        console.log('SSR server running at http://localhost:4000');
        });

9. Run this command to run server

   npx ts-node server.ts




